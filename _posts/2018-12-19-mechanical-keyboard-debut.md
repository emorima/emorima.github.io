---
layout: post
title:  "自作キーボードデビューの話"
date:   2018-12-19 01:20:00 +0900
tags: [diary]
---
これは、<a href="https://qiita.com/advent-calendar/2018/kcscarrot">ケーシーエスキャロットAdventCalendar 2018</a>&nbsp;18日目の記事になります。

昨日は、<a href="https://qiita.com/kawakin">kawakin</a>&nbsp;の「TV番組表を取得してみたい」でした。<br />
kawakinとは、その昔、某メーカーのEPGシステムで一緒に仕事をしていました。<br />
私はまだARIBの定義とかをかすかに覚えているけど、kawakinは覚えているだろうか...<br />
<br />
さて、ではさっそく、自作キーボードデビューの話をしていきたいと思います。<br />

### きっかけ

2016年12月から、肩凝りを軽減させるために、MiSTEL BAROCCO のSplit Keyboardsを使っていました。

2017年くらいからRuby界隈の人たちが、キーボードを自作しているのを見かけて、キーキャップの色の組み合わせも色々でかわいいし、市販のキーボードでは見ない形も気にはなっていたのですが、自分が始める理由にはなっていませんでした。

なのですが、BAROCCOの左と右を繋ぐケーブルの接触が悪くなっていて、買い替えかなぁ〜と思っていたところ、そのケーブルがなくなってしまって(結局後で見つかった)、買い換えるなら、自作キーボードやってみようかなと思ったのがきっかけです。

<blockquote class="twitter-tweet" data-lang="ja">
<div dir="ltr" lang="ja">
使っている BAROCCO のケーブルがどっかいってしまった...<br />
自作キーボード沼の前に、今立っている気がする...</div>
— emorima (@emorima) <a href="https://twitter.com/emorima/status/1006096761813794816?ref_src=twsrc%5Etfw">2018年6月11日</a></blockquote>

### いざ購入！
自作キーボードと言っても、色々な形があるので調べてみたのですが、<a href="https://twitter.com/youchan">youchan</a>&nbsp;のお勧めのMint60を購入することにしました。(BAROCCO 使いには、Mint60が使いやすい！というのが決めてになりました)

今回自作キーボードが初めてなので、スターターセット(ファームウェアに既にキーマップが焼いてあるもの)を購入しました。

8月に申し込んで、9月中の発送予定でしたが、台風で関西空港の物流に影響が出た件で、少し遅れて、10月に届きました！

今は、<a href="https://eucalyn.booth.pm/">BOOTH のゆかりや</a>&nbsp;さんで購入できます！<br />

必要な道具は、これまた<a href="http://eucalyn.hatenadiary.jp/entry/about-mint60-03">ゆかりやさんのブログ</a>を見て購入しておきました。

### そして...

はんだコテやら必要なものは揃えていたし、<a href="http://eucalyn.hatenadiary.jp/entry/how-to-build-mint60">ゆかりやさんの組み立てメモ</a>&nbsp;も何度も読んでいたのですが、なかなか組み立てず...

というのも、はんだ付けした経験がない！

聞いてみると「中学の技術でやった〜」という人が多いのですが、私はやらなかったんですよ...

世代とかの問題ではなく、たぶん、通っていた学校(私立の女子中)のカリキュラムになかったはず...

そんなこんなで、はんだ付けうまくできるかが不安で、そのままになってしまっていたのですが、神のようなイベントを見つけました!!!

<a href="https://connpass.com/event/110634/">Mint60組み立て会Vol.1</a>

ゆかりやさんが組み立て方法を教えてくれる会!!!

すぐ申し込んで、参加してきたので、組み立て方法を説明します。

### Mint60の組み立て

順番としては、

- 基盤にダイオードをはんだ付けする
- TRRSケーブルのコネクタ、タクトスイッチをはんだ付けする
- 24pinをはんだ付けする
- スタビライザを組立て、基盤につける
- キースイッチをはんだ付けする
- ProMicroをはんだ付けする
- LEDテープをはんだ付けする
- アクリル板を組み立てる
- キートップをはめる

組み立て会では、左側のキーボードだけを行いました。

#### 基盤にダイオードを刺す

最初にダイオードにはんだ付けをするために、基盤に空いた穴(Dnn 、nnは01〜の数字)に順にダイオードを刺していきます。  
基盤の四角がいっぱい書いてある方が、表。派手なデザインとなっているのが裏で、ダイオードが表側になるように刺します。  

また、ダイオードには向きがあって、以下の図のようになるようにします。

<div class="separator" style="clear: both; text-align: center;">
<a href="https://4.bp.blogspot.com/-BBHIicmV60U/XBkJAsi1CkI/AAAAAAAAO8I/-ptZ4EfLgbwa1Tyj40nLXvkPl4GAD2TfACLcBGAs/s1600/mint60_%25E3%2583%2580%25E3%2582%25A4%25E3%2582%25AA%25E3%2583%25BC%25E3%2583%2589%25E8%25AA%25AC%25E6%2598%258E%2B%25281%2529.jpg" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" data-original-height="464" data-original-width="399" height="320" src="https://4.bp.blogspot.com/-BBHIicmV60U/XBkJAsi1CkI/AAAAAAAAO8I/-ptZ4EfLgbwa1Tyj40nLXvkPl4GAD2TfACLcBGAs/s320/mint60_%25E3%2583%2580%25E3%2582%25A4%25E3%2582%25AA%25E3%2583%25BC%25E3%2583%2589%25E8%25AA%25AC%25E6%2598%258E%2B%25281%2529.jpg" width="275" /></a></div>

左側は、D01〜D29まであります。  
右側は、左側よりキーが多く、D01〜D37まであります。  
(家で右側を作った時に、D01〜D29までしかダイオードをはめていなかったため、ほぼ出来上がってから、はんだ付けを除去することになりました...)

ここで、ゆかりさんに教えてもらったポイント⭐  
Mint60の基盤のダイオードの刺す幅は、だいたい 6mmになっていて、  
Mint60のアクリルパネルが1枚2mmくらいなので、アクリルパネルを3枚重ねて、  
ダイオードを先にまとめて6mmの幅で曲げておくと、基盤に刺しやすいです！

基盤にダイオードを刺したら、基盤を裏返すのですが、そのままだとせっかく刺したダイオードが抜けてしまうので、ダイオードの両端を広げてハの字にするか、または逆に閉じるかして、抜けないようにしておきます。

#### はんだ付けする前に、はんだ付けのポイント説明⭐

先にも書きましたが、はんだ付けをしたことがなかったので、  
今回組み立て会に参加して、ゆかりさんにはんだ付けのポイントをわかりやすく説明してもらって、本当にありがたかったので、是非その情報を伝えたい!!!

- はんだこては鉛筆のように持ちます。
- 温度制御ができるはんだこてだと、270℃〜320℃くらいの設定がちょうどよいです。(FX600の場合、温度が指定温度になるとダイアル左にあるランプが点滅します)
  - こての温度が高すぎると、はんだに含まれる松脂が蒸発しすぎてしまうので、つけた後の色がツヤがなくなり、にぶい感じの色になるそうです。
  - 温度が高くなった場合には、受け皿の水を使って下げます。(そのため、水が結構蒸発するので、受け皿のスポンジの水はじょぼじょぼくらいに浸すのがよいそうです)
- はんだ付けをする時には、基盤側とはんだの両方を温める必要があります。ゆかりさんに教えてもらったのは、以下の方法です。(初心者にもわかりやすい!)
  - 基盤にこてをあてて3カウント
  - はんだをこて先につけて2カウント
  - はんだを離して、こてを基盤から離す
- 基盤が温まっていない状態ではんだ付けをすると、基盤にはんだが密着せずに、「いもはんだ」になるそうです。
  - いもはんだになってしまう場合、こての温度を上げるとよいかもしれないとのことです！
- はんだ付けをしていると、こての先に付着したはんだが酸化して汚れるので、こて台のスポンジまたは、金属たわしみたいなもので汚れを落とします。

#### ダイオードのはんだ付けをする

👆のポイントを胸に、せっせと基盤にダイオードをはんだ付けします。  
はんだ付けができたら、ダイオードの余分な線は、ニッパーで切ります。  
(切る前に、ちゃんとはんだ付けできているか確認してもらいました!)

#### JP1をはんだブリッジではんだ付けする

基盤の裏を見ると、左右の基盤にJP1と書いてあるところがあります。<br />
ここをはんだブリッジで繋げます。<br />
はんだブリッジをデフォルメして描くと、以下のような感じになります。<br />

<div class="separator" style="clear: both; text-align: center;">
<a href="https://3.bp.blogspot.com/-vgpRyO0DjKY/XBkJLrut9uI/AAAAAAAAO8M/cqtyVyuIUo8GSfyPS41UJMsz34epnR6agCLcBGAs/s1600/mint60_%25E3%2581%25AF%25E3%2582%2593%25E3%2581%25A0%25E3%2583%2596%25E3%2583%25AA%25E3%2583%2583%25E3%2582%25B8%25E8%25AA%25AC%25E6%2598%258E%2B%25281%2529.jpg" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" data-original-height="181" data-original-width="368" height="157" src="https://3.bp.blogspot.com/-vgpRyO0DjKY/XBkJLrut9uI/AAAAAAAAO8M/cqtyVyuIUo8GSfyPS41UJMsz34epnR6agCLcBGAs/s320/mint60_%25E3%2581%25AF%25E3%2582%2593%25E3%2581%25A0%25E3%2583%2596%25E3%2583%25AA%25E3%2583%2583%25E3%2582%25B8%25E8%25AA%25AC%25E6%2598%258E%2B%25281%2529.jpg" width="320" /></a></div>

#### TRRSコネクタをはんだ付けする

TRRSコネクタは、左右のキーボードを繋げるケーブルのコネクタになるものです。  
JP1の上にTRRSコネクタの刺す位置があり、基盤の裏側から刺し、基盤の表側からはんだ付けします。<br />

#### タクトスイッチをはんだ付けする

タクトスイッチは、基盤の中央よりやや上にあるSWの箇所に裏から刺して、表からはんだ付けします。(左側はSW30、右側はSW42になります)

#### 24pinをはんだ付けする

ProMicroを乗せるための24pinピンをはんだ付けします。  
ピンヘッダの短い足の方基盤側、長い方がProMicro側になります。

組み立て会の時には、ブレッドボードがなかったので、苦戦しながらつけたのですが、ちょっと曲がってしまったので、ブレッドボードを使った方がよいと思います。というのは、ピンを平行にはんだ付けできないと、プロセッサが付けられないという、悔いても悔やみきれない状況に陥るからです。

ブレッドボードを使った方法で説明すると、  
ブレッドボードにピンの長い方を刺し、ブレッドボード側が裏で、表が上にくるように基盤を乗せて、はんだ付けします。(この時点では、ProMicroのはんだ付けはしません)

#### スタビライザを組立て、基盤につける

スタビライザとは、ShiftキーやEnterキーのように2key以上のキーを押す時に、キー全体が一緒に押されるようにする装置になります。  
組立の時には、向きに注意する必要があります。(針金が上下に動くように組立てます)

スタビライザを基盤につける位置は、2key以上の位置になります。(左側はSW29、右側はSW8、SW23と、SW36 / SW38 / SW40のいずれかで選べます)  
基盤上の穴の大きい方側に、スタビライザの針金側がくるように、基盤にはめ込みます。

スタビライザを基盤にしっかり固定しないと、アクリル板を組立てた時に、歪んでしまう(左端と右端の厚さが違ったりする)ので、必ず基盤にピッタリはめます。

#### キースイッチをはんだ付けする

いよいよ、キースイッチになります。  
これでやっとキーボードっぽくなっていきます。

まず、アクリル板の紙を剥がします。(だいぶ剥がしにくい感じですが、ここはひたすらに頑張ってやってくださいとのアドバイスがありました)

基盤の表側を上にして、同じ形状のアクリル板(キースイッチがはめられるようになっているもの)に、キースイッチをはめていきます。(スタビライザの位置の大きいキーは除きます)

キースイッチをはめたら、アクリル板を裏返して(丁寧にやらないとキースイッチがポロポロ落ちます...)、基盤を中表にして合わせます。  
そして、基盤の裏側からキースイッチをはんだ付けします。

ここで、ゆかりさんに教えてもらったポイント⭐  

ProMicroの位置のキーキャップはProMicroを付けた後にはやり直しができないので、特に注意すること。  
キーキャップのはんだ付けは、基盤の四隅からやっていくと、基盤が浮かずに(組み立てた時に歪まずに)できます。


この時点で、テスターがあれば電通チェックを行います。(組立て会の時にはやってもらいました！)

#### ProMicroをはんだ付けする

いよいよ、ProMicroのはんだ付けをしていきます。  
ProMicroは、基盤が乗っている側が基盤側(内側)になるように、24pinに乗せ、はんだ付けします。  
はんだ付けをしたら、pinの出ている分をニッパーでカットします。

ここで、ゆかりさんに教えてもらったポイント⭐  

ProMicroのピンは太くて硬いので、袋の中などに入れてカットしないと、どこかに飛んでいってしまいます。(踏んだすると痛い...)  
また、手で押さえたりすると、手も痛くなるので、やらないように！

#### LEDテープをはんだ付けする

長いLEDテープが入っていると思うので、左右に分けます。  
左側はLED７つ分、右側はLED８つ分になるようにカットします。  
LEDテープは、４列目に貼るのですが、はんだ付けなどと干渉すると、キーボードの入力ができなくなったりするので、４列目のでっぱりなどは、ニッパーできれいにカットしておきます。  

LEDテープを基盤の裏側の４列目に合わせます。(VCC, LED, GMDの接続部があるところ)  
基盤のVCC と LEDテープの+5V、基盤のLEDとLEDテープのDin、基盤のGMDをLEDテープのGNDを、それぞれはんだブリッジで繋ぎます。

さて、ここまでできたら、USBでPCに繋ぐとLEDテープが光るはずです。  
(USBケーブルは、データ通信のものを使用して確認してください)

#### アクリル板を組み立てる

<a href="http://eucalyn.hatenadiary.jp/entry/how-to-build-mint60">ゆかりさんのブログ</a>を参考にして組み立てました。  

組み立てたら、ゴム足を貼り付けておきます。(大きい方を上につけます)

#### キートップをはめる

せっせとキートップをはめていきます。  
Hawaiiは１行毎色が違うので、はめていくのがワクワクしますね。

全部、キートップをはめたら完成です！

<blockquote class="twitter-tweet" data-lang="ja">
<div dir="ltr" lang="ja">
Mint60 完成したっ!!!<br />
ダイオードつけ忘れて、キースイッチのはんだ外したりした！<br />
スイッチの浮きもちゃんと直した！<br />
<br />
次のキーボードこれで作れる！ <a href="https://t.co/QK5yF3Op9s">pic.twitter.com/QK5yF3Op9s</a></div>
— emorima (@emorima) <a href="https://twitter.com/emorima/status/1073180363508244480?ref_src=twsrc%5Etfw">2018年12月13日</a></blockquote>
<script async="" charset="utf-8" src="https://platform.twitter.com/widgets.js"></script><br />

### 次は...

QMK firmwareの書き込みにトライしてみたいな〜と思っています！(ビルド環境はもう作った)

